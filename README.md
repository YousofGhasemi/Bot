# 📊 Telegram Fund Bot

یک ربات حسابداری گروهی برای تلگرام ✨  
مخصوص مدیریت صندوق‌های خانوادگی، دوستانه یا کاری — با قابلیت تفکیک حسابداری در هر گروه، نمایش موجودی، ثبت ورودی/خروجی و تأیید مانده روزانه.

---

## ✨ امکانات

- 🔹 مدیریت حسابداری جداگانه برای هر گروه تلگرامی
- 🔹 ثبت تراکنش‌های ورودی و خروجی به صورت خودکار از پیام‌ها
- 🔹 پشتیبانی از چندین دارایی (دلار، یورو, طلا، بیت‌کوین، …)
- 🔹 دستور `/bal` برای نمایش داشبورد موجودی
- 🔹 دکمه اینلاین 📊 برای نمایش موجودی لحظه‌ای
- 🔹 دکمه ✅ برای تأیید مانده روز و بازنشانی ورودی/خروجی
- 🔹 ذخیره‌سازی داده‌ها در فایل JSON مستقل برای هر گروه (`data/group_<chatid>.json`)
- 🔹 پشتیبانی از Python 3.13 و کتابخانه `python-telegram-bot==22.4`

---

## 🖼️ نمونه خروجی

### دستور `/bal` و دکمه موجودی
```
📊 مدیریت صندوق:
برای مشاهده موجودی روی دکمه زیر کلیک کنید.
```

### بعد از زدن دکمه 📊
```
*دلار*
مانده تأییدشدهٔ قبل: 15,000
ورود: 5,000    خروج: 3,000
موجودی فعلی: 17,000

*یورو*
مانده تأییدشدهٔ قبل: 800
ورود: 200    خروج: 50
موجودی فعلی: 950

...
```

### بعد از زدن دکمه ✅
```
✅ موجودی روز تایید شد.
مانده صندوق:
*دلار*: 17,000
*یورو*: 950
...
```

---

## ⚙️ نصب و راه‌اندازی

### 1. کلون ریپو
```bash
git clone https://github.com/YousofGhasemi/telegram-fund-bot.git
cd telegram-fund-bot
```

### 2. ساخت محیط مجازی و نصب وابستگی‌ها
```bash
python -m venv venv
source venv/bin/activate    # در ویندوز: .\venv\Scripts\activate
pip install -r requirements.txt
```

### 3. تنظیم توکن ربات
در فایل [`config.py`](config.py) مقدار `BOT_TOKEN` را با توکن ربات خود جایگزین کنید یا به صورت امن در متغیر محیطی تنظیم کنید:
```bash
export BOT_TOKEN="123456:ABC-DEF..."
```

### 4. اجرای ربات
```bash
python bot.py
```

---

## 🚀 اجرای خودکار روی VPS ویندوز
برای اجرای دائمی ربات روی ویندوز سرور:
- استفاده از [NSSM](https://nssm.cc/) برای نصب به صورت **Windows Service**  
- یا ایجاد **Task Scheduler** با دستور `schtasks` برای اجرای خودکار هنگام Logon  

> آموزش کامل در [راهنمای نصب](docs/INSTALL_WINDOWS.md) آورده شده.

---

## 📂 ساختار پروژه
```
telegram-fund-bot/
│
├── bot.py         # منطق اصلی ربات
├── db.py          # مدیریت دیتابیس گروه‌ها
├── parser.py      # پردازش و شناسایی تراکنش‌ها
├── config.py      # تنظیمات و متغیرهای محیطی
├── requirements.txt
└── data/          # دیتابیس مجزای هر گروه (JSON)
```

---

## 🤝 مشارکت (Contributing)
پول ریکوئست‌ها و پیشنهادها خوش‌آمد می‌شن!  
اگر ایرادی دیدی یا ایده‌ای داشتی، لطفاً [Issue](https://github.com/YousofGhasemi/telegram-fund-bot/issues) جدید باز کن.

---

## 📜 لایسنس
این پروژه تحت لایسنس **MIT** منتشر شده است.  
برای جزئیات بیشتر به فایل [LICENSE](LICENSE) مراجعه کنید.

---

## ⭐ حمایت
اگر این پروژه به کارت اومد، لطفاً ریپازیتوری رو ⭐ بزن تا افراد بیشتری بتونن ازش استفاده کنن 🙌
